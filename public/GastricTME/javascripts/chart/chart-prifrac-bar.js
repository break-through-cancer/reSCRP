// Set new default font family and font color to mimic Bootstrap's default styling
(Chart.defaults.global.defaultFontFamily = "Nunito"),
  '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
Chart.defaults.global.defaultFontColor = "#858796";

var ctx = document.getElementById("PRIFracBar");
var myCellChart = new Chart(ctx, {
  type: "bar",
  data: {
    labels: [
      "Pt01_PRI",
      "Pt02_PRI",
      "Pt03_PRI",
      "Pt04_PRI",
      "Pt05_PRI",
      "Pt09_PRI",
      "Pt10_PRI",
      "Pt12_PRI",
      "Pt13_PRI",
      "Pt14_PRI",
      "Pt15_PRI",
      "Pt16_PRI",
      "Pt17_PRI",
      "Pt18_PRI",
      "Pt19_PRI",
      "Pt20_PRI",
      "Pt21_PRI",
      "Pt22_PRI",
      "Pt23_PRI",
    ],
    datasets: [
      {
        label: "T",
        data: [
          0.355828220858896, 0.334603658536585, 0.474832214765101,
          0.113611416026345, 0.23777564717162, 0.817126269956459,
          0.710857477319286, 0.145722713864307, 0.426856714178545,
          0.323660714285714, 0.42057197788993, 0.253242924528302,
          0.410472972972973, 0.498293515358362, 0.331384015594542,
          0.441687344913151, 0.338547934215804, 0.210781932977173,
          0.235955056179775,
        ],
        cellNumber: [
          232, 439, 566, 207, 248, 1126, 2429, 247, 569, 870, 1750, 859, 729,
          292, 340, 1068, 844, 868, 861,
        ],
        backgroundColor: "#F8766Dcc",
      },
      {
        label: "B/Plasma",
        data: [
          0.0383435582822086, 0.313262195121951, 0.250838926174497,
          0.048847420417124, 0.446788111217641, 0.0551523947750363,
          0.0190225343868891, 0.107964601769912, 0.186046511627907,
          0.0386904761904762, 0.153088199951935, 0.325766509433962,
          0.0281531531531532, 0.250853242320819, 0.159844054580897,
          0.282464846980976, 0.0930605695948656, 0.0267119961146187,
          0.263359824609482,
        ],
        cellNumber: [
          25, 411, 299, 89, 466, 76, 65, 183, 248, 104, 637, 1105, 50, 147, 164,
          683, 232, 110, 961,
        ],
        backgroundColor: "#C49A00cc",
      },
      {
        label: "NK",
        data: [
          0.0429447852760736, 0.0282012195121951, 0.0721476510067114,
          0.0126234906695939, 0.0153403643336529, 0.0718432510885341,
          0.0582382206613989, 0.00471976401179941, 0.0232558139534884,
          0.0569196428571429, 0.0254746455179043, 0.0403891509433962,
          0.112612612612613, 0.037542662116041, 0.057504873294347,
          0.032258064516129, 0.0425190533493783, 0.0320543953375425,
          0.0375445327486983,
        ],
        cellNumber: [
          28, 37, 86, 23, 16, 99, 199, 8, 31, 153, 106, 137, 200, 22, 59, 78,
          106, 132, 137,
        ],
        backgroundColor: "#53B400cc",
      },
      {
        label: "Myeloid",
        data: [
          0.352760736196319, 0.145579268292683, 0.119127516778523,
          0.0455543358946213, 0.037392138063279, 0.02322206095791,
          0.0702370500438982, 0.242477876106195, 0.0472618154538635,
          0.0974702380952381, 0.13578466714732, 0.0442216981132075,
          0.324887387387387, 0.0972696245733788, 0.233918128654971,
          0.1095947063689, 0.360208584035299, 0.0250121418164157,
          0.336256508632502,
        ],
        cellNumber: [
          230, 191, 142, 83, 39, 32, 240, 411, 63, 262, 565, 150, 577, 57, 240,
          265, 898, 103, 1227,
        ],
        backgroundColor: "#00C094cc",
      },
      {
        label: "Stromal",
        data: [
          0.0920245398773006, 0.0114329268292683, 0.0192953020134228,
          0.0230515916575192, 0.0335570469798658, 0.0058055152394775,
          0.105355575065847, 0.136283185840708, 0.0750187546886722,
          0.00148809523809524, 0.0122566690699351, 0.00678066037735849,
          0.0405405405405405, 0.00511945392491468, 0.0808966861598441,
          0.0227460711331679, 0.0705976734857601, 0.00121418164157358,
          0.0183611948479035,
        ],
        cellNumber: [
          60, 15, 23, 42, 35, 8, 360, 231, 100, 4, 51, 23, 72, 3, 83, 55, 176,
          5, 67,
        ],
        backgroundColor: "#00B6EBcc",
      },
      {
        label: "Epithelial",
        data: [
          0.0306748466257669, 0.163109756097561, 0.0453020134228188,
          0.567508232711306, 0.229146692233941, 0.00870827285921625, 0,
          0.242477876106195, 0.186046511627907, 0.480282738095238,
          0.0672915164623888, 0.289799528301887, 0.0422297297297297,
          0.109215017064846, 0.134502923976608, 0.0727874276261373,
          0.0425190533493783, 0.0155415250121418, 0.064949301178405,
        ],
        cellNumber: [
          20, 214, 54, 1034, 239, 12, 0, 411, 248, 1291, 280, 983, 75, 64, 138,
          176, 106, 64, 237,
        ],
        backgroundColor: "#A58AFFcc",
      },
      {
        label: "Malignant",
        data: [
          0.0874233128834356, 0.0038109756097561, 0.0184563758389262,
          0.188803512623491, 0, 0.0181422351233672, 0.0362891425226807,
          0.120353982300885, 0.0555138784696174, 0.00148809523809524,
          0.185532323960586, 0.0397995283018868, 0.0411036036036036,
          0.00170648464163823, 0.00194931773879142, 0.0384615384615385,
          0.0525471319695146, 0.688683827100534, 0.0435735818032338,
        ],
        cellNumber: [
          57, 5, 22, 344, 0, 25, 124, 204, 74, 4, 772, 135, 73, 1, 2, 93, 131,
          2836, 159,
        ],
        backgroundColor: "#FB61D7cc",
      },
    ],
  },
  options: {
    maintainAspectRatio: false,
    legend: {
      labels: {
        usePointStyle: false,
        boxWidth: 12,
      },
    },
    scales: {
      xAxes: [{ stacked: true }],
      yAxes: [
        {
          stacked: true,
          ticks: {
            beginAtZero: true,
            max: 1.0,
          },
        },
      ],
    },
    tooltips: {
      callbacks: {
        label: function (tooltipItem, data) {
          return [
            data.datasets[tooltipItem.datasetIndex].label +
              " fraction: " +
              data.datasets[tooltipItem.datasetIndex].data[
                tooltipItem.index
              ].toFixed(2),
            "Cell number: " +
              data.datasets[tooltipItem.datasetIndex].cellNumber[
                tooltipItem.index
              ],
          ];
        },
      },
    },
  },
});
